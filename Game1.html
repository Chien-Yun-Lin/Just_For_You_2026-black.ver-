<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yu-hsiang's EE Quest</title>
    <style>
        /* å¾©å¤çµ‚ç«¯æ©Ÿèˆ‡é›»æ©Ÿå®¤é¢¨æ ¼ */
        body { background: #050505; color: #00ff41; font-family: 'Courier New', monospace; display: flex; flex-direction: column; align-items: center; padding: 10px; margin: 0; }
        #game-container { border: 2px solid #00ff41; width: 95%; max-width: 400px; padding: 15px; border-radius: 5px; box-shadow: 0 0 20px rgba(0, 255, 65, 0.2); margin-top: 20px; }
        
        .bar-label { font-size: 11px; margin-top: 10px; color: #aaa; }
        .bar-container { background: #111; border: 1px solid #00ff41; height: 14px; width: 100%; margin: 4px 0; overflow: hidden; }
        #hp-bar { background: #ff3131; width: 100%; height: 100%; transition: width 0.8s ease-out; }
        #mp-bar { background: #00d4ff; width: 100%; height: 100%; transition: 0.5s; }

        #screen { height: 150px; background: #000; padding: 10px; font-size: 13px; overflow-y: auto; border: 1px inset #00ff41; margin: 10px 0; line-height: 1.5; color: #00ff41; }
        
        /* æ¨¡æ“¬ç¤ºæ³¢å™¨å€ */
        #oscilloscope { height: 100px; width: 100%; background: #001a00; position: relative; border: 1px solid #004400; margin-bottom: 10px; display: none; overflow: hidden; }
        .wave { position: absolute; width: 100%; height: 2px; top: 50%; left: 0; transition: 0.1s; }
        #target-wave { border-top: 2px dashed #ff00ff; opacity: 0.4; transform: scaleY(1.5) translateY(-5px); } 
        #player-wave { border-top: 2px solid #00ff41; box-shadow: 0 0 5px #00ff41; }

        .menu { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        button { background: #000; border: 1px solid #00ff41; color: #00ff41; padding: 12px 5px; cursor: pointer; font-family: 'Courier New', monospace; font-weight: bold; }
        button:disabled { border-color: #333; color: #444; cursor: not-allowed; }
        button:active { background: #00ff41; color: #000; }
        
        .slider-box { margin: 15px 0; display: none; text-align: center; border: 1px dashed #555; padding: 10px; }
        input[type=range] { width: 90%; accent-color: #00ff41; margin-top: 10px; }
        
        #final-screen { text-align: center; color: #ff00ff; padding: 20px; display: none; }
        .hidden { display: none; }
        
        /* å‹•ç•«æ•ˆæœ */
        .glitch { animation: flash 0.2s infinite; }
        @keyframes flash { 0% { opacity: 1; } 50% { opacity: 0.7; } 100% { opacity: 1; } }
    </style>
</head>
<body>

<div id="game-container">
    <div style="text-align:center; font-size: 10px; letter-spacing: 2px;">[ SYSTEM: BELOVED BANK v12.09 ]</div>
    
    <div class="bar-label">TARGET: ä¿®ä¸å®Œçš„ Bug & æ··äº‚æ³¢å½¢</div>
    <div class="bar-container"><div id="hp-bar"></div></div>
    
    <div id="screen">
        [ç³»çµ±åˆå§‹åŒ–å®Œæˆ]...<br>
        åµæ¸¬åˆ°å¡ç‰‡æŒæœ‰è€…ï¼šYu-hsiang Tai<br>
        æ¬Šé™ç­‰ç´šï¼šæ ¸å¿ƒé–‹ç™¼è€… (Owner)<br>
        è«‹ä¸‹é”æŒ‡ä»¤ä»¥ç©©å®šç³»çµ±...
    </div>

    <div id="oscilloscope">
        <div id="target-wave" class="wave"></div>
        <div id="player-wave" class="wave"></div>
    </div>

    <div class="bar-label">ENERGY (ç²¾ç¥å€¼):</div>
    <div class="bar-container"><div id="mp-bar"></div></div>

    <div id="ctrl-box" class="slider-box">
        <label style="font-size:11px;">èª¿æ•´é »ç‡é”æˆå…±æŒ¯ (Hint: ç”Ÿæ—¥)</label><br>
        <input type="range" id="freq-slider" min="0" max="100" value="10" oninput="updateWave()">
        <div id="freq-display" style="font-size: 10px; margin-top:5px;">Frequency: 10 Hz</div>
    </div>

    <div id="menu" class="menu">
        <button id="btn-atk" onclick="action(1)">é‡æ¸¬é›»å£“</button>
        <button id="btn-skill" onclick="action(2)">æš´åŠ› Debug</button>
        <button id="btn-sync" onclick="startSync()">æ³¢å½¢åŒæ­¥</button>
        <button id="btn-final" onclick="summon()" disabled>å¬å–š è€å©†å¤§äºº</button>
    </div>

    <div id="final-screen">
        <h2 class="glitch">CORE RESONANCE!</h2>
        <p>ã€ŒCodeæœƒå‡ºéŒ¯ï¼Œä½†æ„›ä¸æœƒæœ‰Bugã€‚ã€</p>
        <div style="font-size: 13px; color: #00d4ff; border: 1px solid #00d4ff; padding: 10px; background: rgba(0,212,255,0.1);">
            ğŸ‚ äºç¿”, ç”Ÿæ—¥å¿«æ¨‚ï¼<br>
            é¡˜æˆ‘å€‘çš„æ„Ÿæƒ…åƒç†æƒ³é›»è·¯ä¸€æ¨£ï¼Œ<br>
            æ°¸é ç©©å®šè¼¸å‡ºï¼Œä½å™ªé‹è¡Œã€‚â¤ï¸
        </div>
        <p style="font-size: 10px; color: #666; margin-top: 20px;">[ Connection Status: FOREVER ]</p>
    </div>
</div>

<script>
    let hp = 1000, mp = 100, isSyncing = false;
    const log = document.getElementById('screen');
    const hpBar = document.getElementById('hp-bar');
    const mpBar = document.getElementById('mp-bar');
    const playerWave = document.getElementById('player-wave');

    function addLog(msg) {
        log.innerHTML += `<br>> ${msg}`;
        log.scrollTop = log.scrollHeight;
    }

    // åŸºæœ¬æˆ°é¬¥é‚è¼¯
    function action(type) {
        if (type === 1) {
            let dmg = Math.floor(Math.random() * 20) + 30;
            hp -= dmg;
            addLog(`ç™¼å‹•ç‰©ç†é‡æ¸¬ï¼Œé€ æˆ ${dmg} é»å‚·å®³ã€‚`);
        } else if (type === 2) {
            if (mp < 40) { addLog("èƒ½æºä¸è¶³ï¼è«‹é»æ“ŠåŒæ­¥ç²å–å…±æŒ¯ã€‚"); return; }
            mp -= 40; hp -= 200;
            addLog("åŸ·è¡Œæš´åŠ› Debugï¼å¤§é‡ Bug è¢«æ¸…é™¤ï¼");
        }
        updateUI();
    }

    function updateUI() {
        hpBar.style.width = (Math.max(0, hp)/10) + "%";
        mpBar.style.width = mp + "%";
        if (hp <= 400 && !isSyncing) {
            addLog("<span style='color:yellow;'>è­¦å‘Šï¼šç³»çµ±å¤±çœŸï¼Œè«‹åŸ·è¡Œæ³¢å½¢åŒæ­¥ï¼</span>");
        }
    }


    function startSync() {
        isSyncing = true;
        document.getElementById('oscilloscope').style.display = 'block';
        document.getElementById('ctrl-box').style.display = 'block';
        addLog("é€²å…¥ç¤ºæ³¢å™¨æ¨¡å¼ï¼šè«‹æ‰‹å‹•åŒ¹é…ç›¸ä½ã€‚");
    }

    function updateWave() {
        let val = document.getElementById('freq-slider').value;
        document.getElementById('freq-display').innerText = `Frequency: ${val} Hz`;
        
        // è¦–è¦ºä¸Šçš„æ³¢å½¢å¹²æ“¾æ•ˆæœ
        let drift = Math.abs(val - 51); // 51 æ˜¯ 05/01 çš„éš±å–»
        playerWave.style.transform = `scaleY(${1 + (100-drift)/100}) skewX(${drift/2}deg) translateY(${(val%5)-2}px)`;
        
        if (val == 51) { 
            addLog("<span style='color:#ff00ff;'>åµæ¸¬åˆ° 0501Hz ç”Ÿæ—¥é »ç‡ï¼æ¬Šé™è§£é–ï¼</span>");
            document.getElementById('btn-final').disabled = false;
            document.getElementById('btn-final').style.background = '#ff00ff22';
            document.getElementById('btn-final').style.borderColor = '#ff00ff';
        }
    }

    function summon() {
        let code = prompt("è«‹è¼¸å…¥ç³»çµ±é€šè¨Šé‡‘é‘°ï¼š");
        
        if (code === "1209") {
            addLog("é‡‘é‘° 12/09 èªè­‰é€šéï¼");
            addLog("å•Ÿå‹•çµ‚æ¥µå…±æŒ¯å”å®š...");
            setTimeout(() => {
                hp = 0;
                updateUI();
                document.getElementById('menu').style.display = 'none';
                document.getElementById('ctrl-box').style.display = 'none';
                document.getElementById('oscilloscope').style.display = 'none';
                document.getElementById('final-screen').style.display = 'block';
                addLog("SYSTEM STABILIZED. HAPPY BIRTHDAY!");
            }, 1000);
        } else {
            addLog("<span style='color:red;'>éŒ¯èª¤ï¼šé‡‘é‘°ä¸ç¬¦ï¼Œé€£ç·šæ‹’çµ•ã€‚</span>");
        }
    }
</script>
</body>
</html>